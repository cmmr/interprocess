<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Mutexes, Semaphores, and Message Queues • interprocess</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Noto_Sans-0.4.10/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Mutexes, Semaphores, and Message Queues">
<meta name="description" content="Provides access to low-level operating system mechanisms for performing atomic operations on shared data structures. Mutexes provide shared and exclusive locks. Semaphores act as counters. Message queues move text strings from one process to another. All these interprocess communication (IPC) tools can optionally block with or without a timeout. Implemented using the cross-platform boost C++ library &lt;https://www.boost.org/doc/libs/release/libs/interprocess/&gt;.">
<meta property="og:description" content="Provides access to low-level operating system mechanisms for performing atomic operations on shared data structures. Mutexes provide shared and exclusive locks. Semaphores act as counters. Message queues move text strings from one process to another. All these interprocess communication (IPC) tools can optionally block with or without a timeout. Implemented using the cross-platform boost C++ library &lt;https://www.boost.org/doc/libs/release/libs/interprocess/&gt;.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">interprocess</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cmmr/interprocess/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="interprocess">interprocess<a class="anchor" aria-label="anchor" href="#interprocess"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of <code>interprocess</code> is to synchronize concurrent R processes.</p>
<p>Allows R to access low-level operating system mechanisms for performing atomic operations on shared data structures. Mutexes provide shared and exclusive locks. Semaphores act as counters. Message queues move text strings from one process to another. All these interprocess communication (IPC) tools can optionally block with or without a timeout.</p>
<p>Works cross-platform, including Windows, MacOS, and Linux, and can be used to synchronize a mixture of R sessions and other types of processes if needed.</p>
<p>Implemented using the <a href="https://www.boost.org/doc/libs/release/libs/interprocess/" class="external-link">Boost C++ library</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the latest stable version from CRAN:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"interprocess"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or the development version from GitHub:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"cmmr/interprocess"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Mutexes, semaphores, and message queues are managed by the operating system. Any process that knows the resource’s name can access it. Therefore, sharing the resource name (a short text string) amongst cooperating processes enables communication and synchronization.</p>
<p>These names can be any alphanumeric string that starts with a letter and is no longer than 250 characters. The <code><a href="reference/mutex.html">mutex()</a></code>, <code><a href="reference/semaphore.html">semaphore()</a></code>, and <code><a href="reference/queue.html">queue()</a></code> functions will default to generating a unique identifier, or you can provide a custom or pre-existing one with the <code>name</code> parameter. If the resource is associated with a specific file or directory, the <code>file</code> parameter can be used to derive a name from normalizing and hashing that path.</p>
<p>Setting <code>cleanup = TRUE</code> will automatically remove the resource when the R session exits. Otherwise, the resource will persist until <code>$remove()</code> is called or the operating system is restarted.</p>
<div class="section level3">
<h3 id="mutexes">Mutexes<a class="anchor" aria-label="anchor" href="#mutexes"></a>
</h3>
<p>An exclusive lock is acquired by default. For a shared lock, use <code>shared = TRUE</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">mut</span> <span class="op">&lt;-</span> <span class="fu">interprocess</span><span class="fu">::</span><span class="fu"><a href="reference/mutex.html">mutex</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mut</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="co">#&gt; [1] "oThd9KRpHb0"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">mut</span>, <span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="st">'Important Data'</span>, <span class="va">tmp</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">mut</span>, shared <span class="op">=</span> <span class="cn">TRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Important Data"</span></span>
<span></span>
<span><span class="va">mut</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="semaphores">Semaphores<a class="anchor" aria-label="anchor" href="#semaphores"></a>
</h3>
<p>The semaphore’s value can be incremented with <code>$post()</code> and decremented with <code>$wait()</code>. The initial value can also be set in the constructor.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sem</span> <span class="op">&lt;-</span> <span class="fu">interprocess</span><span class="fu">::</span><span class="fu"><a href="reference/semaphore.html">semaphore</a></span><span class="op">(</span><span class="st">'mySemaphore'</span>, value <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sem</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="co">#&gt; [1] "mySemaphore"</span></span>
<span></span>
<span><span class="va">sem</span><span class="op">$</span><span class="fu">post</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sem</span><span class="op">$</span><span class="fu">wait</span><span class="op">(</span>timeout_ms <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="va">sem</span><span class="op">$</span><span class="fu">wait</span><span class="op">(</span>timeout_ms <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="va">sem</span><span class="op">$</span><span class="fu">wait</span><span class="op">(</span>timeout_ms <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="va">sem</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="message-queues">Message Queues<a class="anchor" aria-label="anchor" href="#message-queues"></a>
</h3>
<p>The constructor’s <code>max_count</code> and <code>max_nchar</code> parameters determine how much memory is allocated for the queue.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mq</span> <span class="op">&lt;-</span> <span class="fu">interprocess</span><span class="fu">::</span><span class="fu"><a href="reference/queue.html">queue</a></span><span class="op">(</span>max_count <span class="op">=</span> <span class="fl">2</span>, max_nchar <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mq</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="co">#&gt; [1] "Ae2udeRLWcb"</span></span>
<span></span>
<span><span class="va">mq</span><span class="op">$</span><span class="fu">send</span><span class="op">(</span><span class="st">'Hello'</span><span class="op">)</span></span>
<span><span class="va">mq</span><span class="op">$</span><span class="fu">send</span><span class="op">(</span><span class="st">'Hi'</span>, priority <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mq</span><span class="op">$</span><span class="fu">receive</span><span class="op">(</span>timeout_ms <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Hi"</span></span>
<span></span>
<span><span class="va">mq</span><span class="op">$</span><span class="fu">receive</span><span class="op">(</span>timeout_ms <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Hello"</span></span>
<span></span>
<span><span class="va">mq</span><span class="op">$</span><span class="fu">receive</span><span class="op">(</span>timeout_ms <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NULL</span></span>
<span></span>
<span><span class="va">mq</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=interprocess" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/cmmr/interprocess/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/cmmr/interprocess/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing interprocess</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Daniel P. Smith <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2479-2044" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Alkek Center for Metagenomics and Microbiome Research <br><small class="roles"> Copyright holder, funder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=interprocess" class="external-link"><img src="https://www.r-pkg.org/badges/version/interprocess" alt="cran"></a></li>
<li><a href="https://github.com/cmmr/interprocess/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/cmmr/interprocess/actions/workflows/R-CMD-check.yaml/badge.svg" alt="dev"></a></li>
<li><a href="https://anaconda.org/conda-forge/r-interprocess" class="external-link"><img src="https://anaconda.org/conda-forge/r-interprocess/badges/version.svg" alt="conda"></a></li>
<li><a href="https://app.codecov.io/gh/cmmr/interprocess" class="external-link"><img src="https://codecov.io/gh/cmmr/interprocess/graph/badge.svg" alt="covr"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel P. Smith, Alkek Center for Metagenomics and Microbiome Research.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
